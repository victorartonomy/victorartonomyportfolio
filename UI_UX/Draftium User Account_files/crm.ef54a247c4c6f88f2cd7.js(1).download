(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1328:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new(r(418).Subject);t.default=n},1782:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),a=s(n),i=s(r(49)),o=s(r(2966)),u=s(r(2967));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.onClose,r=e.text,i=e.titleText,s=e.refreshText,c=(0,n.useCallback)(function(){t(),window.location.reload()},[t]);return a.default.createElement("div",{className:u.default.wrapper},a.default.createElement("img",{src:o.default}),a.default.createElement("div",{className:u.default.text},a.default.createElement("strong",null,i),r,a.default.createElement("span",{onClick:c,className:u.default.refreshLink},s)))};c.propTypes={onClose:i.default.func,text:i.default.string,titleText:i.default.string,refreshText:i.default.string},t.default=a.default.memo(c)},1788:function(e){e.exports=JSON.parse('{"name":"socket-api","version":"1.0.6","description":"api wrapper","main":"index.js","scripts":{"build":"webpack -o lib/api-worker.js","test":"echo \\"Error: no test specified\\" && exit 1","make-api-worker":"webpack -o ../../api/lib/docker/website/api-worker.js","api-worker":"webpack-cli common/util/api-worker.js -o dist/api-worker.js; webpack-cli common/util/api-shared.js -o dist/api-shared.js;"},"repository":{"type":"git","url":"git+https://github.com/webliumteam/weblium.git"},"publishConfig":{"registry":"https://npm.pkg.github.com"},"author":"eugene.jjj@gmail.com","license":"ISC","dependencies":{"babel-core":"^6.26.3","babel-loader":"^8.2.2","babel-plugin-transform-class-properties":"^6.24.1","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-polyfill":"^6.26.0","babel-preset-env":"^1.7.0","jsonwebtoken":"^8.5.1","socket.io-client":"^2.2.0","webpack":"^5.11.0","webpack-cli":"^4.2.0"}}')},1789:function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,i){try{var o=t[a](i),u=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var o=r(2978),u=r(1785),s=r(654),c=r(1788).version,p=u("weblium:api-client:request");p.color="darkorchid";var l=u("weblium:api-client:success");l.color="forestgreen";var d=u("weblium:api-client:failure");d.color="crimson",e.exports=function(e){var t,r=this,u=(t=i(regeneratorRuntime.mark(function e(t){var r,n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=u,e.t0){e.next=5;break}return e.next=4,g();case 4:e.t0=e.sent;case 5:return r=e.t0,n=o.timeout||f.timeout||5e3,"auth.logout"===(t=t||{}).action&&(w=b=null),["socket.setToken","auth.login"].includes(t.action)&&(t.socketioVersion=c),i=++y,r.emit("api",Object.assign(t,{messageId:i})),p("%s %s %o",i,t.action,t),e.abrupt("return",new Promise(function(e,r){var u=setTimeout(function(){if(h[i]){delete h[i];var t=new Error("Timeout expired");t.code="TimeoutExpired",t.message="Timeout expired",t.stack=o.callStack?t+"\n"+o.callStack:t.stack,r&&r(t),e=r=null}},n);h[i]=Object.assign({},{request:t},o,{resolve:function(){delete h[i],clearTimeout(u);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];l("%s %s %o",i,t.action,o),e&&e.apply(void 0,a(o)),e=r=null},reject:function(){delete h[i],clearTimeout(u);for(var n=arguments.length,o=Array(n),s=0;s<n;s++)o[s]=arguments[s];d("%s %s %o",i,t.action,o),r&&r.apply(void 0,a(o)),e=r=null}})}));case 14:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)}),f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=void 0,v=void 0,g=null,h={},b=f.refreshToken,w=f.token,y=0,k=null==f.throwErrorOnStatus||!!f.throwErrorOnStatus,x=new s;function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],a=u(e,t,r);return a.data=function(){return a.then(function(e){return e.data})},a.assert=function(){return a.then(function(e){var r=e.error,a=e.data;if(r){var i=r,o=i.message,u=n(i,["message"]);throw(r=Object.assign(new Error(o||u.code||""),u)).stack=t.callStack?r+"\n"+t.callStack:r.stack,r}return a})},a}function P(){if(m){var e=m;m=v=null,e.close();var t=h;for(var r in h={},t){var n=t[r];delete t[r];var a={message:"Connection is closed",name:"ConnectionClosed",code:"ECONCLOSED",request:n.request};n.resolve({error:a,status:503})}x.emit("closeConnection",e)}}return g=function(){return v=v||new Promise(function(t,a){var u,s,c=Object.assign({transports:["websocket","polling"]},f.socket),p="string"==typeof e?o(e,c):e;p.on("connect",(u=i(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=6;break}return e.next=3,R({action:"auth.login",query:{refreshToken:b}},{},p).catch(function(e){401==e.status&&(b=w=null)});case 3:b&&x.emit("login",{refreshToken:b}),e.next=9;break;case 6:if(!w){e.next=9;break}return e.next=9,R({action:"socket.setToken",data:{token:w}},{},p).catch(function(e){401==e.status&&(b=w=null)});case 9:t&&t(m=p),t=a=null,x.emit("connect",n);case 12:case"end":return e.stop()}},e,r)})),function(e){return u.apply(this,arguments)})),p.on("api",(s=i(regeneratorRuntime.mark(function e(t){var a,i,o,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=39;break}if(t.messageId){e.next=6;break}x.emit("notify",t),e.next=39;break;case 6:if(h[t.messageId]){e.next=9;break}return console.warn("There is no handle for response ",t),e.abrupt("return");case 9:if(a=h[t.messageId],e.prev=10,e.t0="auth.login"===a.request.action&&t.data,!e.t0){e.next=19;break}return e.next=15,R({action:"socket.refreshToken"},{},p);case 15:return b=e.sent.data,e.next=18,R({action:"socket.token"},{},p);case 18:w=e.sent.data;case 19:e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(10),console.error("unknown error",e.t1),e.abrupt("return",a.reject(e.t1));case 25:if(delete h[t.messageId],t.request=a.request,["auth.login","auth.logout"].includes(a.request.action)||!t.error||!b||401!=t.status||!["api.auth.unauthorized","api.auth.token_expired","api.auth.invalid_token"].includes(t.error.code)){e.next=38;break}return i=b,w=b=null,e.next=32,R({action:"auth.login",query:{refreshToken:i}},{},p).catch(function(){});case 32:if(!w||!b){e.next=38;break}return x.emit("login",{token:w,refreshToken:b}),x.emit("relogin",{token:w,refreshToken:b}),e.next=37,R(a.request,a,p).then(a.resolve).catch(a.reject);case 37:return e.abrupt("return",e.sent);case 38:t.error&&k?(o=t.error,u=o.message,s=n(o,["message"]),(c=Object.assign(new Error(u||s.code||""),s)).stack=a.callStack?c+"\n"+a.callStack:c.stack,c.data=s,a.reject(c)):a.resolve(t);case 39:e.next=44;break;case 41:e.prev=41,e.t2=e.catch(0),console.error(e.t2,e.t2.stack);case 44:case"end":return e.stop()}},e,r,[[0,41],[10,21]])})),function(e){return s.apply(this,arguments)})),p.on("error",function(e){x.emit("error",e),a&&a(e),t=a=null}),p.on("reconnect_failed",function(){a&&a(new Error("socket-io reconnect failed")),t=a=null}),p.on("disconnect",function(e){x.emit("disconnect",e),m===p&&P()}),p.on("close",function(e){x.emit("closeConnection",e)})})},function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t||[];var n=["call","apply","inspect","valueOf","name","then","catch","next"];return new Proxy(function e(r){var n=new Error("");Error.captureStackTrace&&Error.captureStackTrace(n,e);var a=n.stack.replace(/^(.*)?\r?\n/m,"");return R(Object.assign({},r,{action:t.join(".")}),{callStack:a})},{get:function(i,o){if("string"==typeof o&&!n.includes(o)){if(!(o in r)){if(t.length||"domain"==o||!(o in x)){for(var u=o.split("."),s=(f=u,Array.isArray(f)?f:Array.from(f)),c=s[0],p=s.slice(1),l=r[c]=e([].concat(a(t),[c]),{}),d=0;d<p.length;d++)l=l[p[d]];return l}r[o]=function(){return x[o].apply(x,arguments)}}return r[o]}var f},set:function(e,t,n){return r[t]=n,!0},deleteProperty:function(e,t){return delete r[t],!0}})}(null,{close:P,get refreshToken(){return b},get token(){return w},get rawSocket(){return m},get requests(){return Object.values(h)},connect:function(){return g()}})}},1943:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.promise){e.next=5;break}return e.next=3,r.promise.catch(Boolean);case 3:e.next=0;break;case 5:return e.prev=5,r.promise=t(),e.next=9,r.promise;case 9:return e.abrupt("return",e.sent);case 10:return e.prev=10,delete r.promise,e.finish(10);case 13:case"end":return e.stop()}},e,this,[[5,,10,13]])}),function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,i){try{var o=t[a](i),u=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})});function r(e){return t.apply(this,arguments)}return r}()},2966:function(e,t,r){e.exports=r.p+"static/media/bell.ac15b825.svg"},2967:function(e,t,r){e.exports={wrapper:"wrapper_2ef",text:"text_1j2",refreshLink:"refreshLink_1rS"}},2973:function(e,t,r){"use strict";(function(t){var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};var a=r(654),i=r(1785),o=r(1786).parse,u=r(1788).version,s=r(1789),c=r(3e3),p=i("weblium:api-client:request");p.color="darkorchid";var l=i("weblium:api-client:success");l.color="forestgreen";var d=i("weblium:api-client:failure");d.color="crimson",t.Api=e.exports=t.SharedWorker?function(e,t){var r={},i=t.worker||new SharedWorker(t.workerFile||"/api-worker.js?host="+encodeURIComponent(o(e).hostname)),f=new a,m=void 0,v=void 0,g=void 0;i.port.onmessage=function(e){var t=e.data;if(t.ping)return i.port.postMessage({ping:t.ping});if(t.relogin)return f.emit("relogin",t.relogin);if(t.notify)return f.emit("notify",t.notify);if(t.type)return f.emit(t.type,t.payload);var n=r[t._reqId];delete r[t._reqId],n&&n(t)},i.port.postMessage({action:"construct",data:[e,t]});var h=0;function b(e){var t=e.action,n=e.data,a=void 0===n?{}:n,o=++h;"auth.login"===t&&(a.workerVersion=u,a.host=location.hostname),g&&(a.query=a.query||{},a.query.employee=g),p("%s %s %O",o,t,a);var s=new Promise(function(e){r[o]=e,i.port.postMessage({action:t,data:a,_reqId:o})}).then(function(e){var r=e.data,n=e.refreshToken,a=e.token,i=r.status,u=r.error;if(u){var s=new Error(u.message||u.code||""+u);throw Error.captureStackTrace&&Error.captureStackTrace(s,b),Object.assign(s,u),s.reqData=r,s.data=u,d("%s %s %o",o,t,u),s}if(i>300){var p=new Error("invalid response, status code: "+i);throw Error.captureStackTrace&&Error.captureStackTrace(p,b),Object.assign(p,u,{status:i}),d("%s %s %o",o,t,u),p}return v=a,(m=n)&&(g=c.decode(m).employee),l("%s %s %o",o,t,r),r});return s.data=function(){return s.then(function(e){return e.data})},s}return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=t||[],new Proxy(function(e){return b({data:e,action:t.join(".")})},{get:function n(a,i){if("string"==typeof i&&"call"!==i&&"inspect"!==i&&"valueOf"!==i&&"name"!==i){if(!(i in r)){if(t.length||"domain"===i||!(i in f)){var o=i.split("."),u=(m=o,Array.isArray(m)?m:Array.from(m)),s=u[0],c=u.slice(1),p=new Error("");Error.captureStackTrace&&Error.captureStackTrace(p,n);for(var l=r[s]=e([].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(t),[s]),{},p),d=0;d<c.length;d++)l=l[c[d]];return l}r[i]=function(){return f[i].apply(f,arguments)}}return r[i]}var m},set:function(e,t,n){return r[t]=n,!0},deleteProperty:function(e,t){return delete r[t],!0}})}(null,{close:function(){b({action:"close"}).then(function(){return i.port.close()})},get refreshToken(){return m},get employee(){return g},get token(){return v},version:function(){return u},socketioVersion:function(){return b({action:"version"}).then(function(e){return e.data})},setAccessToken:function(r){return s(e,n({},t,{token:r}))}})}:s}).call(this,r(75))},2997:function(e,t){},3002:function(e,t){},3004:function(e,t){},3015:function(e,t){},3017:function(e,t){},3045:function(e,t){},3047:function(e,t){},3048:function(e,t){},3053:function(e,t){},3055:function(e,t){},3062:function(e,t){},3064:function(e,t){},3082:function(e,t){},3085:function(e,t){},3101:function(e,t){},3104:function(e,t){},3121:function(e,t){e.exports=function e(t,r){const n=a=>new Proxy((...e)=>(function(e,t){const n=e&&e(...t);try{n&&"function"==typeof n.catch&&n.catch(r)}catch(e){}return n})(a,e),{get(i,o){if(t===a&&"setAccessToken"==o)return t=>e(a.setAccessToken(t),r);const u=a[o];return"function"==typeof u?n(u):u},set(e,t,r){a[t]=r},deleteProperty(e,t){delete a[t]}});return n(t)}},391:function(e,t,r){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,i){try{var o=t[a](i),u=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var s=t.Y=function(e){return(t=function(t){return e(function(e){return t(t)(e)})})(t);var t},c=(t.sideEffect=function(e){return function(){return e.apply(void 0,arguments),arguments.length<=0?void 0:arguments[0]}},t.mapWithIndex=e.map.convert({cap:!1}),t.mapValuesWithKey=e.mapValues.convert({cap:!1}),t.throttleNotFixed=e.throttle.convert({fixed:!1}),t.splitAndMap=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"{$}",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return t?t.split(n).map(e.isString(r)?function(e){return r.replace(/\{\$\}/,e)}:r):void 0},t.pipeP=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return u(regeneratorRuntime.mark(function e(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var u,s,c,p,l,d,f,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u=a(n,1),s=u[0],c=!0,p=!1,l=void 0,e.prev=4,d=t[Symbol.iterator]();case 6:if(c=(f=d.next()).done){e.next=15;break}return m=f.value,e.next=10,m.apply(void 0,o(n));case 10:s=e.sent,n=[s];case 12:c=!0,e.next=6;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(4),p=!0,l=e.t0;case 21:e.prev=21,e.prev=22,!c&&d.return&&d.return();case 24:if(e.prev=24,!p){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",s);case 30:case"end":return e.stop()}},e,void 0,[[4,17,21,29],[22,,24,28]])}))},t.compareByPath=e.curry(function(t,r,n){return e.get(t,r)===e.get(t,n)}),t.compareByPaths=e.curry(function(t,n,a){return t.every(r.compareByPath(e.__,n,a))}),t.keyToProp=e.curry(function(e,t){return Object.keys(t).map(function(r){return n({},t[r],i({},e,r))})}),e.curry(function(e,t){return t.reduce(function(t,r){var n=r[e],a=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(r,[e]);return t[n]=a,t},{})}));t.propToKey=c;t.call=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if("function"==typeof e)return e.apply(void 0,r)},t.method=function(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(t){return t[e].apply(t,r)}}};var p=t.ifElse=e.curry(function(e,t,r){return function(){return e.apply(void 0,arguments)?t.apply(void 0,arguments):r.apply(void 0,arguments)}}),l=t.when=p(e.__,e.__,e.identity),d=(t.unless=p(e.__,e.identity),t.objOf=e.curry(function(e,t){return i({},e,t)}),t.keysUnion=e.pipe(Array.of,e.map(e.keys),e.unnest,e.uniq)),f=(t.zipValues=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return d.apply(void 0,r).reduce(function(t,n){return t[n]=r.map(e.prop(n)),t},{})},t.equalsByValues=e.curry(function(t,r,n){if(r===n)return!0;if(!e.isObjectLike(r)||!e.isObjectLike(n))return!1;var a=Object.keys(r),i=Object.keys(n);if(a.length!==i.length)return!1;var o=!0,u=!1,s=void 0;try{for(var c,p=a[Symbol.iterator]();!(o=(c=p.next()).done);o=!0){var l=c.value;if(!t(r[l],n[l]))return!1}}catch(e){u=!0,s=e}finally{try{!o&&p.return&&p.return()}finally{if(u)throw s}}return!0})),m=t.equalsByValuesShallow=f(Object.is),v=(t.memoizeWhile=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,r=[],n=void 0;return function(){for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return t(r,i)||(r=i,n=e.apply(void 0,i)),n}},t.whileDo=e.curry(function(t,r){return s(function(n){return l(t,e.pipe(r,n))})}),t.match=e.curry(function(e,t){return t.match(e)}),t.and=e.all(Boolean),t.or=e.any(Boolean),t.construct=function(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new(Function.prototype.bind.apply(e,[null].concat(r)))}},t.propSatisfies=e.curry(function(t,r,n){return r(e.get(t,n))}),t.createProps=e.curry(function(t,r){return e.assign(r,t(r))}),t.tryCatch=e.curry(function(e,t){return function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=void 0;try{i=e.apply(void 0,n)}catch(e){i=t.apply(void 0,[e].concat(n))}return i}}),t.tryCatchAsync=e.curry(function(e,t){return u(regeneratorRuntime.mark(function r(){for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=void 0,r.prev=1,r.next=4,e.apply(void 0,o(a));case 4:u=r.sent,r.next=12;break;case 7:return r.prev=7,r.t0=r.catch(1),r.next=11,t.apply(void 0,[r.t0].concat(o(a)));case 11:u=r.sent;case 12:return r.abrupt("return",u);case 13:case"end":return r.stop()}},r,void 0,[[1,7]])}))}),t.updateMultiple=e.curry(function(t,r,n){var a;return(a=e).pipe.apply(a,o(e.map(e.update(e.__,r),t)))(n)}),t.unnestDeep=s(function(t){return l(e.isArray,e.pipe(e.map(t),e.unnest))}),t.evolve=e.curry(function(t,r){return Object.keys(t).reduce(function(r,n){var a=t[n];return e.isFunction(a)?e.update(n,a,r):e.isObjectLike(a)?e.update(n,v(a),r):r},r)})),g=(t.splitWhen=e.curry(function(e,t){for(var r=0;r<t.length&&!e(t[r]);)r+=1;return[t.slice(0,r),t.slice(r)]}),t.getOrGet=e.curry(function(t,r,n){return e.getOr(e.get(t,n),r,n)}),t.interpolate=e.curry(function(t,r,n){return n.replace(t,function(t,n){return e.get(n.trim(),r)})}),t.pushAt=e.curry(function(e,t,r){return[].concat(o(r.slice(0,e)),[t],o(r.slice(e)))}),t.push=e.curry(function(e,t){return t?[].concat(o(t),[e]):[e]}),t.move=e.curry(function(e,t,r){var n=r.slice();return n.splice(t<0?n.length+t:t,0,n.splice(e,1)[0]),n}),t.unshift=e.curry(function(e,t){return t?[e].concat(o(t)):[e]}),t.invert=e.complement(e.identity),t.defined=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var s=(0,o.value)();if(void 0!==s)return s}}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}},t.applySpec=function t(r){return function(){for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return e.mapValues(function(r){return e.isPlainObject(r)?t(r).apply(void 0,a):r.apply(void 0,a)},r)}},t.nestMap=e.curry(function(t,r){return r.length?e.unnest(e.map(function(e){return g(function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.apply(void 0,[e].concat(n))},r.slice(1))},r[0])):t()}));t.padZeroProductCode=function(t){return e.padCharsStart("0")(6)(e.getOr(t,"variants.0.code",t)||0)},t.renameKey=e.curry(function(t,r,a){return void 0!==a[t]?n({},e.omit(t,a),i({},r,a[t])):a})}).call(this,r(380),r(391))},399:function(e,t,r){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.setPaymentSource=t.getPaymentSourcesList=t.changeGroup=t.renameGroup=t.removeGroup=t.addGroup=t.getGroups=t.getEmployee=t.deleteWebsiteVersion=t.renameWebsiteVersion=t.restoreWebsiteVersion=t.createWebsiteVersion=t.getWebsiteVersions=t.subdomainExists=t.getUsedStorage=t.getBlankTemplate=t.getOrganizationTemplate=t.reactivateSubscription=t.generateName=t.contributorRegisterAndConfirm=t.getWebsiteStatistic=t.removeContributor=t.fetchContributors=t.leaveContributors=t.contributorConfirms=t.inviteContributor=t.confirmResetPassword=t.restorePassword=t.signupConfirm=t.registerNewUser=t.addUserAction=t.getUserActions=t.setWebsiteAccessToken=t.setAccessToken=t.setAccessUserName=t.startWebsitePayment=t.refreshChargebeeCustomer=t.hasChargebeePaymentMethod=t.manageChargebeeOrgPaymentMethod=t.manageChargebeePaymentMethod=t.startDraftiumProPayment=t.getOrganizationPlans=t.getLifeTimePrice=t.getWebsitePlansWithoutId=t.getWebsitePlans=t.unresolveComment=t.resolveComment=t.removeComment=t.updateComment=t.fetchComment=t.fetchComments=t.addComment=t.createAccessToken=t.changePassword=void 0,t.updateCustomer=t.removeTheme=t.createTheme=t.getWebsiteThemes=t.getPublicThemes=t.getCoreTheme=t.icons8=t.getNounIcon=t.nounproject=t.getGoogleFonts=t.compatibleSubsets=t.updateBlockToSource=t.getBucketName=t.getWebliumSite=t.getWebliumDomain=t.encrypt=t.cloneResource=t.addWebsiteResource=t.getDocumentResources=t.getListDocuments=t.onNotify=t.publish=t.removeResource=t.getBlockResource=t.listWebsiteResources=t.getWebsiteResource=t.getBlockResources=t.removeBlock=t.createBlockOnLocation=t.getBlockCategories=t.getBlockTemplates=t.updateBlock=t.getBlockData=t.removeBlocks=t.getBlockByAnchor=t.getLocationsBlocks=t.getWebsitePage=t.updatePagesMetadataProp=t.getPagesListByFilter=t.updateWebsitePage=t.removeWebsitePage=t.cloneWebsitePage=t.addWebsitePage=t.getWebsitePages=t.getNewId=t.getTransferShortInfo=t.setWebsiteSubscription=t.getWebsiteTransferList=t.declineTransferWebsite=t.acceptTransferWebsite=t.getTransferWebsiteShortInfo=t.getTransferWebsiteByToken=t.cancelTransferWebsite=t.transferWebsite=t.transferWebsiteToOrganization=t.removeWebsite=t.rewriteWebsite=t.createFutureWebsite=t.createWebsite=t.updateWebsite=t.getCustomFonts=t.getFavicon=t.reactivateUserPro=t.reactivateWebsitePro=t.unsubscribeSubscription=t.getUserPro=t.getWebsiteSubscription=t.getWebsiteDomain=t.getWebsitePublishedDomains=t.getWebsiteById=t.getPromisedZones=t.getDomainZoneList=t.getDomainRenewPrice=t.setAutoRenew=t.removeAutoRenew=t.renewDomain=t.registerDomain=t.whois=t.getSuggestDomains=t.removeDomain=t.saveDomain=t.setPrimaryDomain=t.getDomainById=t.getDomainStatus=t.getDomainsStatus=t.getWebsiteDomains=t.getDomains=t.getButtons=t.getTypography=t.getPalettes=t.addWebsite=t.getWebsites=t.getProjectsAndWebsitesCount=t.getWebsitesCount=t.getPersonalWebsitesSimpleList=t.getOrgWebsitesSimpleList=t.getWebsiteList=t.loadList=t.getData=t.WEBSITE_MINI_SELECT=void 0;var a,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=t.loadList=(a=v(regeneratorRuntime.mark(function e(t){var r,n,a,i,u,s,c=t.method,p=t.params,d=void 0===p?{}:p,f=t.filter,m=t.select,v=t.type,h=t.owners,b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0,n=function(){return l.api[c](o({},d,{query:{filter:f,select:m,skip:r,type:v,owners:h}}))},a=b?{}:[];case 3:return e.next=5,n();case 5:if(i=e.sent,u=i.data,s=i.total,u.reduce(function(e,t){if(b){var r=t._id,n=g(t,["_id"]);e[r]=Object.keys(n).length?n:null}else e.push(t);return e},a),!(r+u.length>=s)){e.next=11;break}return e.abrupt("break",14);case 11:r+=u.length;case 12:e.next=3;break;case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)}),s=m(r(3168)),c=r(770),p=m(r(943)),l=r(435),d=r(552),f=m(r(1943));function m(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,i){try{var o=t[a](i),u=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}function g(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var h,b,w,y,k,x,R,P,O,T,S,A,I,_,C,j,W,E,q,L,B,M,D,z,U,N,$,F,V,G,K,H,Z,J,Y,Q,X,ee,te=t.WEBSITE_MINI_SELECT=["_id","contributors","name","removed","subdomain","roles","render","transfer","owner","createdAt","updatedAt","subscription","domains","storageUsed","domain","domainRaw","groups","organization"].join(" "),re=t.getData=e.get("data"),ne=function(e){var t=e._id,r=e.roles,n=g(e,["_id","roles"]);return o({id:t,roles:r||[]},n)},ae=function(e){if(!e)return e;var t=e._id,r=g(e,["_id"]);return o({id:t},r)},ie=(t.getWebsiteList=function(e){return(0,f.default)(function(){return l.api.website.listOwned(e).data()})},t.getOrgWebsitesSimpleList=(h=v(regeneratorRuntime.mark(function e(t){var r,n,a,i,u,s,c,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=p.limit,m=void 0===d?15:d,v=p.skip,g=void 0===v?0:v,h=p.owners,b=p.groupId,w=p.sortSelector,y=void 0===w?{}:w,k=p.filterSelector;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o({},{"published.at":null},b?{groups:{$elemMatch:{_id:b}}}:{},k?{name:{$regex:"/"+k+"/i"}}:{}),n=y.reverse?"-":"",a=""+n+y.id,i={query:{filter:r,select:te,limit:m,skip:g,type:"owned",owners:h,sort:a,organization:t}},e.next=9,(0,f.default)(function(){return l.api.website.listOwned(i)});case 9:return u=e.sent,s=u.data,c=u.total,e.abrupt("return",{data:s,total:c});case 13:case"end":return e.stop()}},e,void 0)})),function(e){return h.apply(this,arguments)}),t.getPersonalWebsitesSimpleList=(b=v(regeneratorRuntime.mark(function e(t){var r,n,a,i,u,s,c,p,d,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=m.limit,g=void 0===v?15:v,h=m.skip,b=void 0===h?0:h,w=m.owners,y=m.groupId,k=m.sortSelector,x=void 0===k?{}:k,R=m.filterSelector;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={"published.at":null},n=y?{groups:{$elemMatch:{_id:y}}}:{},a=x.reverse?"-":"",i=""+a+x.id,u=o({},r,n,R?{name:{$regex:"/"+R+"/i"}}:{}),s={query:{filter:u,select:te,limit:g,skip:b,type:"owned",owners:w,sort:i}},e.next=9,(0,f.default)(function(){return l.api.website.listOwned(s)});case 9:return c=e.sent,p=c.data,d=c.total,e.abrupt("return",{data:p,total:d});case 13:case"end":return e.stop()}},e,void 0)})),function(e){return b.apply(this,arguments)}),t.getWebsitesCount=(w=v(regeneratorRuntime.mark(function e(t){var r,n,a,i=t._id,o=t.isOrganizationMode;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={query:{filter:o?{"published.at":null,$or:[{owner:i},{contributors:{$elemMatch:{_id:i}}}]}:{"published.at":null,owner:i},type:"owned",sort:{createdAt:-1}}},e.next=4,(0,f.default)(function(){return l.api.website.count(r)});case 4:return n=e.sent,a=n.data,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)})),function(e){return w.apply(this,arguments)}),t.getProjectsAndWebsitesCount=(y=v(regeneratorRuntime.mark(function e(t){var r,n,a,i,o=t.customerId,u=t.organizationId;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[o],u&&!["weblium","draftium"].includes(u)&&r.push(u),n={query:{filter:{"published.at":null,$or:[{owner:{$in:r}},{contributors:{$elemMatch:{_id:{$in:r}}}}]},type:"owned"}},e.next=6,(0,f.default)(function(){return l.api.website.count(n)});case 6:return a=e.sent,i=a.data,e.abrupt("return",i);case 9:case"end":return e.stop()}},e,void 0)})),function(e){return y.apply(this,arguments)}),t.getWebsites=function(e){var t=e.filter,r=void 0===t?{}:t,n=e.type,a=e.owners,i=e.convertToObject;return u({method:"website.listOwned",filter:r,type:n,owners:a},i)},t.addWebsite=function(e){return l.api.website.add({data:e})},t.getPalettes=function(e){return l.api.uikitPalette.list({query:{filter:o({website:null},e)}}).data()},t.getTypography=function(e){return l.api.uikitTypography.list({query:{filter:o({website:null},e)}}).data()},t.getButtons=function(e){return l.api.uikitButton.list({query:{filter:o({website:null},e)}}).data()},t.getDomains=function(e){return l.api.domain.list({query:o({sort:"-isPrimary createdAt",select:"createdAt isPrimary provider.name provider.info ipConnected owner transfer subscription zoneRegistered zone"},e)}).data().catch(function(){return[]})}),oe=(t.getWebsiteDomains=function(e){return ie({filter:{website:e}})},t.getDomainsStatus=function(e){return l.api.domain.getIpv4({query:{ids:e}})},t.getDomainStatus=function(e){var t=e._id,r=e.appSubdomain;return l.api.domain.getDomainConnectionStatus({query:{_id:t,appSubdomain:r}}).data()},t.getDomainById=function(e){return l.api.domain.list({query:{filter:{_id:e}}}).data().catch(function(){return[]})},t.setPrimaryDomain=function(e){return l.api.domain.setPrimary({name:e})},t.saveDomain=function(e){var t=e.id,r=e.organization,n=e.data;return l.api.domain.save({id:t,organization:r,data:n}).data()},t.removeDomain=function(e){var t=e.id;return l.api.domain.remove({id:t}).data()},t.getSuggestDomains=function(e){var t=e.data;return l.api.domain.suggest(o({},t)).data()},t.whois=function(e){return l.api.domain.whois({name:e}).data()},t.registerDomain=function(e){return l.api.domain.register(o({},e)).data()},t.renewDomain=function(e){var t=e.name;return l.api.domain.renew({name:t})},t.removeAutoRenew=function(e){var t=e.name;return l.api.domain.removeAutoRenew({name:t}).data()},t.setAutoRenew=function(e){var t=e.name;return l.api.domain.setAutoRenew({name:t}).data()},t.getDomainRenewPrice=function(e){return l.api.domain.renewPrice({name:e}).data()},t.getDomainZoneList=function(){return l.api.domainZone.list().data()},t.getPromisedZones=function(){return l.api.domain.promisedZones().data()},t.getWebsiteById=function(e,t){return l.api.website.get({id:e,query:t}).data()},t.getWebsitePublishedDomains=function(e){return l.api.website.publishedDomains({id:e}).data()},t.getWebsiteDomain=function(e){return l.api.website.getDomain({id:e}).data()},t.getWebsiteSubscription=function(e){return l.api.website.getSubscription({id:e}).data()},t.getUserPro=function(){return l.api.subscription.getUser().data().catch(function(){return null})},t.unsubscribeSubscription=function(e){return l.api.subscription.cancel({id:e}).data()},t.reactivateWebsitePro=function(e){return l.api.website.reactivatePro({id:e}).data()},t.reactivateUserPro=function(){return l.api.customer.reactivatePro().data()},t.getFavicon=(k=v(regeneratorRuntime.mark(function t(r){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={filter:{roles:"_favicon"},select:"alias roles name mimeType",type:{$in:["image"]}},t.next=3,l.api.website.listResources({ownerId:r,query:n}).data();case 3:return a=t.sent,t.abrupt("return",e.find({roles:["_size180x180"]},a));case 5:case"end":return t.stop()}},t,void 0)})),function(e){return k.apply(this,arguments)}),t.getCustomFonts=(x=v(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={type:"font",filter:r},e.prev=1,e.next=4,l.api.website.listResources({ownerId:t,query:n}).data();case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[]);case 11:case"end":return e.stop()}},e,void 0,[[1,8]])})),function(e,t){return x.apply(this,arguments)}),t.updateWebsite=(R=v(regeneratorRuntime.mark(function t(r){var n=r.id,a=r.data,i=r.payload,u=void 0===i?{}:i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",l.api.website.update({id:n,data:a,query:{payload:o({},u,{identifier:p.default,websiteId:n})}}).then(e.flow(e.get("request.data"),e.pick(["uikitTypography","uikitPalette","uikitButton"]))).catch(function(e){throw e}));case 1:case"end":return t.stop()}},t,void 0)})),function(e){return R.apply(this,arguments)}),t.createWebsite=(P=v(regeneratorRuntime.mark(function e(t){var r=t.id,n=t.data;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.api.website.create({id:r,data:n}));case 1:case"end":return e.stop()}},e,void 0)})),function(e){return P.apply(this,arguments)}),t.createFutureWebsite=(O=v(regeneratorRuntime.mark(function e(t){var r=t.id,n=t.data;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.api.website.create({id:r,data:n,query:{makeFuture:!0}}));case 1:case"end":return e.stop()}},e,void 0)})),function(e){return O.apply(this,arguments)}),t.rewriteWebsite=(T=v(regeneratorRuntime.mark(function e(t){var r=t.source,n=t.target;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.api.website.rewriteFrom({from:r,to:n}));case 1:case"end":return e.stop()}},e,void 0)})),function(e){return T.apply(this,arguments)}),t.removeWebsite=(S=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.api.website.remove({id:t}));case 1:case"end":return e.stop()}},e,void 0)})),function(e){return S.apply(this,arguments)}),t.transferWebsiteToOrganization=(A=v(regeneratorRuntime.mark(function e(t){var r=t.website,n=t.organization,a=t.domains;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.api.website.transferToOrganization({id:r._id,organization:n._id,data:{domains:a}}));case 1:case"end":return e.stop()}},e,void 0)})),function(e){return A.apply(this,arguments)}),t.transferWebsite=function(e){var t=e.website,r=e.email;return l.api.website.createTransfer({id:t._id,data:{email:r}})},t.cancelTransferWebsite=function(e){var t=e.transferId;return l.api.website.removeTransfer({key:t})},t.getTransferWebsiteByToken=function(e){var t=e.token;return l.api.website.getTransferByToken({key:t})},t.getTransferWebsiteShortInfo=function(e){var t=e.token;return l.api.website.getTransferShortInfo({key:t}).then(re)},t.acceptTransferWebsite=function(e){var t=e.plan,r=e.stayContributor,n=e.id,a=localStorage.getItem("transferWebsiteToken"),i=a?{key:a}:{id:n};return l.api.website.acceptTransfer({data:o({},i,{plan:t,stayContributor:r})})},t.declineTransferWebsite=function(e){var t=e.id,r=localStorage.getItem("transferWebsiteToken"),n=r?{key:r}:{key:t};return l.api.website.cancelTransfer(o({},n))},t.getWebsiteTransferList=function(){return l.api.website.transferList()},t.setWebsiteSubscription=function(e,t){return l.api.website.setSubscription({id:e,subscriptionId:t})},t.getTransferShortInfo=function(e){return l.api.website.getTransferShortInfo({key:e})},t.getNewId=l.api.object.newId,t.getWebsitePages=function(e){return u({method:"website.listPages",params:{id:e},select:"metadata roles sortOrder slug websiteApplication"})},t.addWebsitePage=function(e){var t=e.id,r=e.data;return l.api.website.addPage({id:t,data:r,query:{detailed:!0,payload:{identifier:p.default,websiteId:t}}}).then(function(e){var t=i(e.data,1)[0];return{pageId:t._id,slug:t.slug}})},t.cloneWebsitePage=function(e){var t=e.id,r=e.data,n=e.targetWebsite,a=e.pageId;return l.api.website.clonePage({id:t,pageId:a,data:r,targetWebsite:n,query:{payload:{identifier:p.default,websiteId:t}}}).then(function(e){var t=i(e.data,1)[0];return{pageId:t._id,slug:t.slug}})},t.removeWebsitePage=function(e){var t=e.id,r=e.pageId;return l.api.website.removePage({id:t,pageId:r,query:{payload:{identifier:p.default,websiteId:t}}}).then(re)},t.updateWebsitePage=function(e){var t=e.websiteId,r=e.pageId,n=e.data;return l.api.websitepage.update({id:r,data:n,query:{payload:{identifier:p.default,type:"updateMetadata",websiteId:t}}}).data()},t.getPagesListByFilter=function(e){var t=e.websiteId,r=e.filter;return l.api.website.listPages({id:t,query:{filter:r,select:"_id"}}).then(function(e){return e.data.map(function(e){return e._id})}).catch(function(){return[]})},t.updatePagesMetadataProp=function(e){var t=e.websiteId,r=e.key,n=e.value,a=e.pages,i=a?{_id:{$in:a}}:{};return l.api.website.updatePages({id:t,data:function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},"metadata."+r,n),query:{filter:i,payload:{identifier:p.default,websiteId:t,type:"updateMetadata"}}}).data().catch(function(){return{}})},t.getWebsitePage=function(e){var t=e.websiteId,r=e.pageId;return l.api.website.listPages({id:t,query:{select:"metadata slug sortOrder websiteApplication",filter:{_id:r}}}).data().then(function(e){var t=i(e,1)[0];if(!t)throw new Error("page.notfound");return t})},t.getLocationsBlocks=function(e,t){return u({method:"website.blockList",filter:{location:{$in:e}},select:"viewRef contentRef content sortOrder name modifier version base location roles published.at categories anchor anchorName",params:{id:t}})},t.getBlockByAnchor=function(t,r){return l.api.website.blockList({id:r,query:{filter:{anchor:t},select:"anchor anchorName categories location sortOrder roles",limit:1e3}}).data().then(e.first)},t.removeBlocks=function(e){return l.api.website.removeBlocks({id:e,query:{filter:{roles:"removed"},payload:{identifier:p.default,websiteId:e}}}).data()},t.getBlockData=function(e){return l.api.block.get({id:e,query:{select:"viewRef contentRef content sortOrder name modifier version base location roles published.at categories anchor anchorName"}}).data().then(ne)},t.updateBlock=function(e){var t=e.id,r=e.data,n=e.websiteId,a=e.payload,i=void 0===a?{}:a;return l.api.block.update({id:t,data:r,query:{payload:o({},i,{identifier:p.default,websiteId:n})}}).data().then(ne)},t.getBlockTemplates=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u({method:"block.listPublished",filter:o({website:null,roles:{$nin:["theme"]}},e),select:"name categories roles wireframe viewRef contentRef modifier scheme version source tags"})},t.getBlockCategories=e.once(function(){return l.api.blockCategory.list({query:{select:"name blockCount sortOrder roles"}}).then(re)}),t.createBlockOnLocation=(I=v(regeneratorRuntime.mark(function e(t){var r,n=t.websiteId,a=t.location,i=t.source,o=t.sortOrder,u=t.anchorName,s=t.roles;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.block.add({data:{website:n,location:a,source:i,sortOrder:o,anchorName:u,roles:s},query:{payload:{identifier:p.default,websiteId:n,createLocation:a}}}).data().then(ne);case 2:return r=e.sent,e.abrupt("return",{block:r});case 4:case"end":return e.stop()}},e,void 0)})),function(e){return I.apply(this,arguments)}),t.removeBlock=function(e){return l.api.block.remove({_id:e})},function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={ref:{$in:r=Array.isArray(r)?r:[r]},roles:{$nin:["_favicon"]}};return l.api[e].listResources({ownerId:t,query:{filter:n}}).data().catch(function(){return[]})}}),ue=(t.getBlockResources=function(e){return l.api.block.listResources({ownerId:e}).data()},t.getWebsiteResource=oe("website"),t.listWebsiteResources=function(e,t){return l.api.website.listResources({ownerId:e,query:t})},t.getBlockResource=oe("block"),t.removeResource=function(e,t){return l.api.website.removeResource({ownerId:e,id:t}).data()},t.publish=function(e){var t=e._id;return l.api.website.publish({_id:t})},t.onNotify=function(e){return l.api.on("notify",e),function(){return l.api.removeListener("notify",e)}},t.getListDocuments=function(e){return u({method:"website.listResources",params:{ownerId:e},select:"ref name props",type:{$in:["document"]}})},t.getDocumentResources=function(e){return u({method:"website.listResources",filter:{roles:"_general"},params:{ownerId:e},select:"ref name props",type:"all"})},t.addWebsiteResource=function(e){var t=e._id,r=e.data;return(0,s.default)(r.url).then(function(e){if(200!=+e.status)throw new Error('Can not load resource from url: "'+r.url+'"');var n={"content-type":e.headers.get("content-type"),Authorization:"Bearer "+l.api.token};return r.name&&(n.name=r.name),r.description&&(n.description=r.description),e.blob().then(function(e){return(0,s.default)((0,c.getHost)()+"/api/website/"+t+"/resource"+(l.api.employee?"?employee="+l.api.employee:""),{method:"POST",body:e,headers:n}).then(function(e){return e.json()})})})},t.cloneResource=function(e){var t=e.resourceId,r=e.websiteId;return l.api.resource.clone({id:t,ownerId:r})},t.encrypt=function(e){var t=e._id,r=e.data;return l.api.website.encrypt({_id:t,data:r})},t.getWebliumDomain=function(){return l.api.domain.WEBLIUM().data()},t.getWebliumSite=function(){return l.api.domain.WEBLIUM_SITE().data()},t.getBucketName=function(){return l.api.api.BUCKET_NAME().data()},t.updateBlockToSource=(_=v(regeneratorRuntime.mark(function e(t){var r,n,a,i=t.id,o=t.sourceId;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.block.reroll({id:i,source:o});case 2:return r=e.sent,n=r.data.viewRef,e.next=6,l.api.block.get({id:o,query:{select:"version published.at source name"}}).then(re);case 6:return a=e.sent,e.abrupt("return",{id:i,version:a.version,name:a.name,viewRef:n,source:a});case 8:case"end":return e.stop()}},e,void 0)})),function(e){return _.apply(this,arguments)}),t.compatibleSubsets=["latin","latin-ext","cyrillic","cyrillic-ext"]);t.getGoogleFonts=e.once(function(){return l.api.google.listFonts().then(re).then(function(t){return e.pipe(e.filter(e.pipe(e.prop("subsets"),e.intersection(ue),e.complement(e.isEmpty))),e.toPairs,e.map(function(t){var r=i(t,2),n=r[0],a=r[1];return o({},e.pick(["category","variants","subsets","prerenderDisabled"],a),{id:n,title:a.family})}))(t.items)})}),t.nounproject=(C=v(regeneratorRuntime.mark(function e(t){var r=t.path,n=t.limit,a=t.offset;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.api.nounproject({path:r,query:{limit:n,offset:a}}));case 1:case"end":return e.stop()}},e,void 0)})),function(e){return C.apply(this,arguments)}),t.getNounIcon=(j=v(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.default)("https://api.weblium.com/api/nounproject/icon/"+t,{headers:{Authorization:"Bearer "+l.api.token}});case 2:if(200===(r=e.sent).status){e.next=5;break}throw new Error("no such icon found in nuonproject");case 5:return e.next=7,r.json();case 7:return n=e.sent,e.abrupt("return",{url:n.icon.icon_url,preview:n.icon.preview});case 9:case"end":return e.stop()}},e,void 0)})),function(e){return j.apply(this,arguments)}),t.icons8=(W=v(regeneratorRuntime.mark(function e(t){var r,n,a,i,o,u=t.query,c=t.limit,p=t.offset;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://api.weblium.com/api/icons8/"+"api/api/iconsets/v4/search?term="+encodeURI(u||"icon")+"&amount="+c+"&offset="+p+"&language=en-US&exact_amount=true",e.next=4,(0,s.default)(r,{headers:{Authorization:"Bearer "+l.api.token}});case 4:if(200===(n=e.sent).status){e.next=7;break}return e.abrupt("return",[]);case 7:return e.next=9,n.json();case 9:return a=e.sent,i=a.icons,o=void 0===i?[]:i,e.abrupt("return",{query:u,collection:o.map(function(e){var t=e.platform,r=e.id;return{request:function(){return(0,s.default)("https://api.icons8.com/api/iconsets/icon?id="+r)},platform:t,id:r}})});case 13:case"end":return e.stop()}},e,void 0)})),function(e){return W.apply(this,arguments)}),t.getCoreTheme=(E=v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{viewRef:"CORE_THEME_VIEW_REF"});case 1:case"end":return e.stop()}},e,void 0)})),function(){return E.apply(this,arguments)}),t.getPublicThemes=function(){return u({method:"block.listPublished",filter:{website:null,roles:{$in:["theme"],$nin:["core-theme"]}},select:"_id name createdAt viewRef base version"})},t.getWebsiteThemes=function(e){return u({method:"website.blockList",params:{id:e},filter:{roles:{$in:["theme"]}},select:"_id name createdAt viewRef base version"})},t.createTheme=(q=v(regeneratorRuntime.mark(function e(t){var r,n,a,i,o,u,s,c=t.websiteId,p=t.source;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.block.add({data:{website:c,source:p}}).data();case 2:return r=e.sent,n=r._id,a=r.name,i=r.createdAt,o=r.viewRef,u=r.base,s=r.version,e.abrupt("return",{theme:{id:n,name:a,createdAt:i,viewRef:o,base:u,version:s}});case 10:case"end":return e.stop()}},e,void 0)})),function(e){return q.apply(this,arguments)}),t.removeTheme=function(e){return l.api.block.remove({_id:e})},t.updateCustomer=function(e){return l.api.customer.save({data:e})},t.changePassword=function(e){var t=e.password,r=e.oldpassword,n=e.username;return l.api.user.changePassword({data:{password:t,oldpassword:r}}).then(function(){return(0,d.login)(n,t),{}}).catch(function(e){return{error:e.message}})},t.createAccessToken=function(e,t){return l.api.website.createAccessToken(o({id:e},t)).data()},t.addComment=function(e){var t=e.comment,r=e.websiteId;return l.api.website.commentAdd({id:r,data:t,query:{payload:{identifier:p.default,websiteId:r}}}).data().then(ae)},t.fetchComments=function(e){return u({method:"website.commentList",params:{id:e}},!1).then(function(e){return e.map(ae)})},t.fetchComment=function(e){var t=e.id,r=e.websiteId;return l.api.website.commentList({id:r,query:{filter:{_id:t}}}).data().then(function(e){return i(e,1)[0]}).then(ae)},t.updateComment=function(e){var t=e.id,r=e.data,n=e.websiteId;return l.api.comment.update({id:t,data:r,query:{payload:{identifier:p.default,websiteId:n}}}).data().then(ae)},t.removeComment=function(e){var t=e.id,r=e.websiteId;return l.api.comment.remove({id:t,query:{payload:{identifier:p.default,websiteId:r}}})},t.resolveComment=function(e){var t=e.id,r=e.websiteId;return l.api.comment.resolve({id:t,query:{payload:{identifier:p.default,websiteId:r}}})},t.unresolveComment=function(e){var t=e.id,r=e.websiteId;return l.api.comment.unresolve({id:t,query:{payload:{identifier:p.default,websiteId:r}}})},t.getWebsitePlans=function(e){return l.api.website.planList({id:e}).then(re)},t.getWebsitePlansWithoutId=function(){return l.api.website.planList().then(re)},t.getLifeTimePrice=function(){return l.api.addon.get({id:"lifetime-landing-website"}).then(function(t){return e.getOr(19600,"data._.price",t)}).catch(function(){return 19600})},t.getOrganizationPlans=function(){return l.api.organization.planList().then(re)},t.startDraftiumProPayment=function(e){var t=e.planId,r=e.platform;return l.api.subscribe.user({plan:t,platform:r})},t.manageChargebeePaymentMethod=function(){return l.api.chargebee.managePaymentSource()},t.manageChargebeeOrgPaymentMethod=function(e){return l.api.organization.managePaymentSource(e)},t.hasChargebeePaymentMethod=function(){return l.api.chargebee.hasPaymentSource()},t.refreshChargebeeCustomer=function(){return l.api.chargebee.refreshCustomer()},t.startWebsitePayment=function(e){var t=e.planId,r=e.id,n=e.planOptions,a=e.platform,i=e.additionalQuery,u=void 0===i?{}:i;return l.api.subscribe.website({plan:t,id:r,query:o({planOptions:n,platform:a},u)})},t.setAccessUserName=function(e){var t=e.websiteId,r=e.name;return l.api.website.setAccessUserName({id:t,data:r}).data()},t.setAccessToken=function(e){try{return l.api.setAccessToken(e)}catch(e){throw n.console.log(e),e}},t.setWebsiteAccessToken=(L=v(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.api.website.setAccessUser(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),n.console.error(e.t0),e.t0;case 10:case"end":return e.stop()}},e,void 0,[[0,6]])})),function(e){return L.apply(this,arguments)}),t.getUserActions=function(e){return l.api.userAction.list({query:{filter:e}}).data().catch(function(){return[]})},t.addUserAction=function(e){var t=e.action,r=e.ns;return l.api.userAction.add({data:{action:t,ns:r}})},t.registerNewUser=function(e){var t=e.lang,r=e.name,n=e.email,a=e.password,i=e.phone,u=e.captchaResponse,s=e.fromDomain;return l.api.organization.registerClient(o({},t||s?{query:o({},s?{from_domain:s}:[],t&&"en"!==t?{lang:t}:[])}:[],{data:{name:r,username:n,phoneNumber:i?"+"+i:"",password:a,"g-recaptcha-response":"localhost"===window.location.host||"3228"===window.location.port?"SKIP_CAPTCHA":u}})).data()},t.signupConfirm=function(e){var t=e.code;return l.api.organization.confirmClient({query:{code:t}})},t.restorePassword=function(e){var t=e.username,r=e.captchaResponse;return l.api.user.restoreSession({data:{username:t,"g-recaptcha-response":"localhost"===window.location.host||"3228"===window.location.port?"SKIP_CAPTCHA":r}}).data()},t.confirmResetPassword=function(e){var t=e.password,r=e.resetToken;return l.api.user.restoreSessionConfirm({key:r,data:{password:t}}).data()},t.inviteContributor=function(e){var t=e.id,r=e.email;return l.api.website.inviteContributor({id:t,data:{username:r}}).data()},t.contributorConfirms=(B=v(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.website.contributorConfirms({query:{inviteToken:t}}).data();case 2:if(r=e.sent){e.next=5;break}throw new Error("Request failed");case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)})),function(e){return B.apply(this,arguments)}),t.leaveContributors=(M=v(regeneratorRuntime.mark(function t(r){var n,a,i=r.websiteId,o=r.organizationId;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:i},o&&(n.organization=o),t.next=4,l.api.website.leaveContributors(n).data();case 4:if((a=t.sent)&&e.get("nModified",a)){t.next=7;break}throw new Error("Request failed");case 7:return t.abrupt("return",a);case 8:case"end":return t.stop()}},t,void 0)})),function(e){return M.apply(this,arguments)}),t.fetchContributors=(D=v(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.website.listContributors({id:t}).data();case 2:if(r=e.sent){e.next=5;break}throw new Error("Request failed");case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)})),function(e){return D.apply(this,arguments)}),t.removeContributor=(z=v(regeneratorRuntime.mark(function e(t){var r,n=t.contributorId,a=t.websiteId;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.website.removeContributor({id:a,contributor:n}).data();case 2:if(r=e.sent){e.next=5;break}throw new Error("Request failed");case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)})),function(e){return z.apply(this,arguments)}),t.getWebsiteStatistic=(U=v(regeneratorRuntime.mark(function e(t){var r,n=t.websiteId,a=t.query;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.website.visitsStatistic({id:n,query:a}).data();case 2:if(r=e.sent){e.next=5;break}throw new Error("Request failed");case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)})),function(e){return U.apply(this,arguments)}),t.contributorRegisterAndConfirm=function(e){return t=v(regeneratorRuntime.mark(function t(r){var n=r.name,a=r.email,i=r.password,o=r.captchaResponse;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.api.organization.registerClient({query:{inviteToken:e},data:{name:n,username:a,password:i,"g-recaptcha-response":"localhost"===window.location.host||"3228"===window.location.port?"SKIP_CAPTCHA":o}});case 3:return t.next=5,(0,d.resetTokens)();case 5:return t.next=7,l.api.website.contributorConfirms({query:{inviteToken:e}}).data();case 7:return t.abrupt("return",t.sent);case 10:if(t.prev=10,t.t0=t.catch(0),console.log(t.t0),!t.t0||"api.website.already_confirmed"!==t.t0.code){t.next=15;break}return t.abrupt("return",null);case 15:throw new Error("Request failed");case 16:case"end":return t.stop()}},t,void 0,[[0,10]])})),function(e){return t.apply(this,arguments)};var t},t.generateName=function(e){var t=e.name;return l.api.website.generateName({from:t}).data()},t.reactivateSubscription=function(e){return l.api.subscription.reactivate({id:e}).data()},t.getOrganizationTemplate=function(){return l.api.website.getOrganizationTemplate().data()},t.getBlankTemplate=function(){return l.api.website.getBlankTemplate().data()},t.getUsedStorage=function(e){return l.api.website.storageUsed(e).data()},t.subdomainExists=(N=v(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.website.isSubdomainExists({subdomain:t}).data();case 2:return r=e.sent,e.abrupt("return",r.reserved);case 4:case"end":return e.stop()}},e,void 0)})),function(e){return N.apply(this,arguments)}),t.getWebsiteVersions=($=v(regeneratorRuntime.mark(function e(t){var r,n,a=t.id;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.website.backupList({id:a,query:{sort:"-backupAt"}});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)})),function(e){return $.apply(this,arguments)}),t.createWebsiteVersion=(F=v(regeneratorRuntime.mark(function e(t){var r,n,a=t.id;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.api.website.backup({id:a});case 3:return r=e.sent,n=r.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}},e,void 0,[[0,8]])})),function(e){return F.apply(this,arguments)}),t.restoreWebsiteVersion=(V=v(regeneratorRuntime.mark(function e(t){var r,n,a=t.websiteId,i=t.versionId;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.website.backupRestore({id:a,backup:i});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)})),function(e){return V.apply(this,arguments)}),t.renameWebsiteVersion=(G=v(regeneratorRuntime.mark(function e(t){var r,n,a=t.websiteId,i=t.versionId,o=t.name;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.website.backupRename({id:a,backup:i,name:o});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)})),function(e){return G.apply(this,arguments)}),t.deleteWebsiteVersion=(K=v(regeneratorRuntime.mark(function e(t){var r,n,a=t.websiteId,i=t.versionId;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.website.backupRemove({id:a,backup:i});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)})),function(e){return K.apply(this,arguments)}),t.getEmployee=function(){return l.api.employee},t.getGroups=(H=v(regeneratorRuntime.mark(function e(t){var r,n,a,i,o=t.organization,u=t.sortSelector,s=t.filterSelector;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.reverse?"-":"",n=""+r+u.id,a=s?{name:{$regex:"/"+s+"/i"}}:{},e.next=5,l.api.websiteGroup.list({query:{organization:o,filter:a,sort:n}}).data();case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e,void 0)})),function(e){return H.apply(this,arguments)}),t.addGroup=(Z=v(regeneratorRuntime.mark(function e(t){var r,n=t.name,a=t.organization;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.websiteGroup.add({data:{name:n},query:{organization:a}}).data();case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,void 0)})),function(e){return Z.apply(this,arguments)}),t.removeGroup=(J=v(regeneratorRuntime.mark(function e(t){var r,n=t.id,a=t.organization;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.websiteGroup.remove({id:n,query:{organization:a}}).data();case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,void 0)})),function(e){return J.apply(this,arguments)}),t.renameGroup=(Y=v(regeneratorRuntime.mark(function e(t){var r,n=t.name,a=t.id,i=t.organization;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.api.websiteGroup.update({id:a,data:{name:n},query:{organization:i}}).data();case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,void 0)})),function(e){return Y.apply(this,arguments)}),t.changeGroup=(Q=v(regeneratorRuntime.mark(function e(t){var r,n=t.websiteId,a=t.removeFrom,i=t.addTo,o=t.organization;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={websites:[n],removeFrom:a,addTo:i},e.next=3,l.api.websiteGroup.change({data:r,query:{organization:o}}).data();case 3:case"end":return e.stop()}},e,void 0)})),function(e){return Q.apply(this,arguments)}),t.getPaymentSourcesList=(X=v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.api.chargebee.listPaymentSources().data());case 1:case"end":return e.stop()}},e,void 0)})),function(){return X.apply(this,arguments)}),t.setPaymentSource=(ee=v(regeneratorRuntime.mark(function e(t){var r=t.id,n=t.paymentSource;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.api.subscription.setPaymentSource({id:r,paymentSource:n}));case 1:case"end":return e.stop()}},e,void 0)})),function(e){return ee.apply(this,arguments)})}).call(this,r(380),r(75))},415:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pushEvents=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(942),i=r(693),o=r(566);t.pushEvents=function(e){var t=e.eventCategory,r=e.eventAction,u=e.eventLabel,s=e.amplitudeEvent,c=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["eventCategory","eventAction","eventLabel","amplitudeEvent"]);(0,o.pushEvent)({eventAction:r,eventCategory:t,eventLabel:u}),(0,i.pushEvent)(n({event:s},c)),(0,a.pushEvent)(n({event:s},c))}},418:function(e,t,r){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.mergeOperators=t.switchMapOperator=t.once=t.not=t.all=t.then=t.sideEffects=t.withLatestFrom=t.finalize=t.tap=t.take=t.switchMapTo=t.switchMap=t.skip=t.shareReplay=t.pluck=t.mapTo=t.map=t.ignoreElements=t.filter=t.debounceTime=t.distinctUntilChanged=t.concat=t.Scheduler=t.BehaviorSubject=t.Subject=t.Observable=void 0;var a=r(395),i=r(534),o=r(931),u=r(1865);function s(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}r(1866),r(1869),r(1872),r(1873),r(1874),r(1875),r(1877),r(1878),r(1880),r(1881),r(1883),r(1884),r(1886),r(1888),r(1890),r(1891),r(1893),r(1895),r(1897),r(1899),r(1901),r(1903),r(1905),r(1907),r(1909),r(1910),r(1912),r(1914),r(1915),r(1918),r(1921),r(1923),r(1925),r(1927),r(1929),r(1930),r(1932),r(1933),r(1935),t.Observable=a.Observable,t.Subject=i.Subject,t.BehaviorSubject=o.BehaviorSubject,t.Scheduler=u.Scheduler;t.concat=e.method("concat"),t.distinctUntilChanged=e.method("distinctUntilChanged"),t.debounceTime=e.method("debounceTime"),t.filter=e.method("filter");var c=t.ignoreElements=e.method("ignoreElements"),p=t.map=e.method("map"),l=(t.mapTo=e.method("mapTo"),t.pluck=e.method("pluck"),t.shareReplay=e.method("shareReplay"),t.skip=e.method("skip"),t.switchMap=e.method("switchMap")),d=(t.switchMapTo=e.method("switchMapTo"),t.take=e.method("take")),f=(t.tap=e.method("do"),t.finalize=e.method("finally"),t.withLatestFrom=e.method("withLatestFrom"),t.sideEffects=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return a.Observable.merge.apply(a.Observable,[e].concat(s(t.map(c()))))}},t.then=function(e){return e.filter(n.identity)},t.all=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a.Observable.combineLatest.apply(a.Observable,t.concat([n.unapply(n.every(n.identity))]))},t.not=p(e.invert),t.once=d(1));t.switchMapOperator=function(e){return function(t){return t.pipe(l(function(t){return a.Observable.of(t).pipe(e(t),f)}))}},t.mergeOperators=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return a.Observable.merge.apply(a.Observable,s(t.map(function(t){return e.pipe(t)})))}}}).call(this,r(391),r(380))},435:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.api=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=c(r(2973)),i=c(r(3121)),o=c(r(1789)),u=r(770),s=c(r(1328));function c(e){return e&&e.__esModule?e:{default:e}}var p={timeout:3e4,keepConnection:4e4,socket:{secure:!0,rejectUnauthorized:!1,verify:!1,transports:["websocket","polling"]}},l=(0,u.getHost)(),d=(0,a.default)(l,p),f=d,m=t.api=(0,i.default)(new Proxy({setAccessToken:function(e){f!==d&&f.close(),f=(0,o.default)(l,n({},p,{token:e}))},setApi:function(e){f!==d&&f!==e&&f.close(),f=e},removeApi:function(){f!==d&&f.close(),f=d}},{get:function(e,t){return t in e?e[t]:f[t]}}),function(e){return s.default.next(e)});window.api=m},552:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.loginWithToken=t.whoami=t.logout=t.loginByToken=t.login=t.resetTokens=void 0;var n,a,i,o,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=(t.login=(n=v(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,c.default)(t&&r,"username and password are required"),e.next=3,m.api.auth.login({data:{username:t,password:r}});case 3:return e.abrupt("return",k());case 4:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)}),t.loginByToken=(a=v(regeneratorRuntime.mark(function t(){var r,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=a||e.get("refreshToken",(0,f.get)("auth")),(0,c.default)(r,"localStorage has no refreshToken"),t.prev=2,t.next=5,m.api.auth.login({query:{refreshToken:r}});case 5:return t.next=7,k();case 7:return(n=t.sent).webliumUser=e.getOr(!1,"options.our")(n),t.abrupt("return",n);case 12:throw t.prev=12,t.t0=t.catch(2),console.error(t.t0),t.t0;case 16:case"end":return t.stop()}},t,this,[[2,12]])})),function(){return a.apply(this,arguments)}),t.logout=(i=v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.api.auth.logout();case 2:(0,f.remove)("auth"),(0,f.remove)("stayContributor"),(0,f.remove)("transferWebsiteToken"),(0,f.remove)("hasTransfer");case 6:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),r(2970)),c=(o=s)&&o.__esModule?o:{default:o},p=r(653),l=r(627),d=r(415),f=r(554),m=r(435);function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,i){try{var o=t[a](i),u=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var g,h=(g=v(regeneratorRuntime.mark(function e(){var t,r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.api.socket.token();case 2:return t=e.sent,r=t.data,e.next=6,m.api.socket.refreshToken();case 6:return n=e.sent,a=n.data,e.abrupt("return",{token:r,refreshToken:a});case 9:case"end":return e.stop()}},e,void 0)})),function(){return g.apply(this,arguments)}),b=function(e){var t=e.token,r=e.refreshToken,n=e.username,a=e.customer,i=e.cripsSignature;(r||t)&&(0,f.set)("auth",{token:t,refreshToken:r,username:n,customer:a,cripsSignature:i})};m.api.on("relogin",function(e){return m.api.auth.whoami().then(function(t){return b(u({},t,e))}).catch(console.error)});var w,y,k=t.resetTokens=(w=v(regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return r=t.sent,t.next=5,(0,p.getCustomer)();case 5:return n=t.sent,b(u({},n,r)),(0,l.pushEvent)({userId:e.get("_id",n)}),t.abrupt("return",n);case 9:case"end":return t.stop()}},t,void 0)})),function(){return w.apply(this,arguments)});t.whoami=function(){return m.api.auth.whoami().data()},t.loginWithToken=(y=v(regeneratorRuntime.mark(function t(r){var n,a,i,o=r.refreshToken,s=r.sendEvent;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.api.auth.login({data:{refreshToken:o}});case 3:return t.next=5,h();case 5:return n=t.sent,t.next=8,(0,p.getCustomer)();case 8:if(!(a=t.sent)){t.next=14;break}return b(u({},a,n)),i=e.get("_id",a),s?s(i):(0,d.pushEvents)({userId:i}),t.abrupt("return",a);case 14:return m.api.auth.logout(),(0,f.remove)("auth"),t.abrupt("return",a);case 19:throw t.prev=19,t.t0=t.catch(0),m.api.auth.logout(),(0,f.remove)("auth"),t.t0;case 24:case"end":return t.stop()}},t,void 0,[[0,19]])})),function(e){return y.apply(this,arguments)})}).call(this,r(380))},554:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.set=function(e,t){var r="";try{(r=JSON.stringify(t))&&localStorage.setItem(e,r)}catch(e){console.error("Unable to stringify value")}finally{console.error("Unable to stringify value")}try{var n=t||{},a=n.cripsSignature,i=n.username;i&&a&&window.$crisp&&window.$crisp.push(["set","user:email",[i,a]]),i&&!a&&window.$crisp&&window.$crisp.push(["set","user:email",[i]])}catch(e){console.warn("Unable to set window.$crisp user values")}},a=t.get=function(e){var t=localStorage.getItem(e);if(t)try{t=JSON.parse(t)}catch(e){console.error("Unable to parse value")}return t},i=(t.remove=function(e){return localStorage.removeItem(e)},t.clear=function(){localStorage.clear()});t.default={set:n,get:a,clear:i}},566:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.pushEvent=t.sendUserEvent=t.initTracker=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=r(775);var i="UA-132039674-1",o="UA-131192062-1",u="clientGaTracker";t.initTracker=function t(r){if(!!e.getOr(!0,"main",r)){var n=e.getOr(!1,"draftium",r),s=u,c=n?{id:o,gtagKey:"G-CJ0NF0BHMY"}:{id:i,gtagKey:"G-N8K7CNQ4MB"},p=c.id,l=c.gtagKey;try{if(l&&(0,a.initGtag)(l),window.ga&&window.ga.getByName&&window.ga.getByName(s))return;window.ga("create",p,"auto",s),setTimeout(function(){return t},0)}catch(e){console.error("Error: ",e)}}};t.sendUserEvent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.advancedEnabled,a=e.eventValue,i=e.nonInteraction,o=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["enabled","advancedEnabled","eventValue","nonInteraction"]);t&&function(e){var t=e.eventCategory,r=void 0===t?"Editor":t,n=e.eventAction,a=e.eventLabel,i=e.eventValue,o=e.nonInteraction,u=void 0===o||o;window.ga&&window.ga("send",{hitType:"event",eventCategory:r,eventAction:n,eventLabel:a,eventValue:i,nonInteraction:u}),window.gtag&&window.gtag("event",n,{event_category:r,event_action:n,event_label:a,value:i})}(n({nonInteraction:!1},o,r?{eventValue:a,nonInteraction:i}:{}))};t.pushEvent=function(e){var t=e.eventCategory,r=void 0===t?"Editor":t,n=e.eventAction,a=e.eventLabel;try{window.ga&&window.ga(u+".send",{hitType:"event",eventCategory:r,eventAction:n,eventLabel:a})}catch(e){console.error("Error: ",e)}}}).call(this,r(380))},627:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.pushEvent=function(e){var t=e.event,r=e.eventCategory,a=void 0===r?"Click":r,i=e.eventAction,o=e.eventLabel,u=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["event","eventCategory","eventAction","eventLabel"]);window.dataLayer&&window.dataLayer.push(n({event:t,eventCategory:a,eventAction:i,eventLabel:o},u))}},653:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomer=void 0;var n,a=r(923),i=(n=a)&&n.__esModule?n:{default:n},o=r(435);t.getCustomer=(0,i.default)("api.customer",function(){return o.api.customer.get().data()})},693:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.pushEvent=function(e){var t=e.event,r=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["event"]);try{var a=n({"Page Hostname":window.location.host},r);window.amplitude&&window.amplitude.getInstance().logEvent(t,a)}catch(e){console.error("Error: ",e)}}},724:function(e,t,r){"use strict";var n,a,i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=(n=[],a=[],i=function(){a.forEach(function(e){return e([].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(n)))})},{add:function(e){var t=e.id,r=e.component,a=e.props,o=void 0===a?{}:a;if(!t)throw new Error("You should pass id");n.find(function(e){return e.id===t})||localStorage.getItem("wl-banner-"+t)||(n.push({id:t,component:r,props:o}),i())},remove:function(e){n=n.filter(function(t){return t.id!==e}),localStorage.setItem("wl-banner-"+e,"true"),i()},subscribe:function(e){a.push(e),e(n)},unsubscribe:function(e){a=a.filter(function(t){return t!==e})},reset:function(e){localStorage.removeItem("wl-banner-"+e)}})},770:function(e,t,r){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getHost=function(){if(!e.window)return r.env.API_HOST||a;if(window.API_HOST)return window.API_HOST;if("https://api.weblium.com".includes("localhost"))return"https://api.weblium.com";var t=window.location,i=t.host,o=t.protocol,u=t.hostname;if(["weblium.local","localhost"].includes(i.split(":")[0]))return a;var s=i.match(/^(?:\w+\.)?app\.((?:dev\d+\.)?(?:weblium|draftium)\.\w+)$/)||[],c=n(s,2)[1];if(c)return o+"//api."+c;return i.startsWith("app.")?("https://api.weblium.com".startsWith("https")?"https":o)+"://"+u.replace(/^app\./,"api."):a};var a="https://api.weblium.com"}).call(this,r(75),r(150))},775:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.loadScript=a;var n=t.stringToUpperCamelCase=function(t){return t.split(" ").filter(function(e){return e&&"-"!==e}).map(function(t){var r=t.match(/[a-zA-Z]+/g);return r.length?r.map(e.capitalize).join(""):""}).join("")};t.objectKeysToLowerCamel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(e).reduce(function(e,t){var a=r(t,2),i=a[0],o=a[1];return e[function(e){var t=n(e);return t.charAt(0).toLowerCase()+t.slice(1)}(i)]=o,e},{})};function a(e,t){var r=!1,n=document.createElement("script");n.type="text/javascript",n.src=e;var a=function(){r||this.readyState&&"complete"!==this.readyState||(r=!0,t())};n.onload=a,n.onreadystatechange=a,document.body.appendChild(n)}t.initGtag=function(e){a("https://www.googletagmanager.com/gtag/js?id="+e,function(){var t=document.createElement("script");t.innerText="window.dataLayer = window.dataLayer || [];\n      function gtag(){dataLayer.push(arguments);}\n      gtag('js', '"+new Date+"');\n      gtag('config', '"+e+"', {send_page_view: false});",document.body.append(t)})},t.setAuthSocialFrom=function(e){return localStorage.setItem("socialLogin",e)},t.getAuthSocialFrom=function(){return localStorage.getItem("socialLogin")},t.clearAuthSocialFrom=function(){return localStorage.removeItem("socialLogin")}}).call(this,r(380))},923:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clear=function(e){n.memoStorage&&e in n.memoStorage&&(n.memoStorage[e].cache={})},t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:36e5;e in n.memoStorage&&!(+new Date>=n.memoStorage[e].ttl)||(n.memoStorage[e]={ttl:+new Date+r,cache:{}});return a=regeneratorRuntime.mark(function r(){for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];var u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u=JSON.stringify(i),n.memoStorage[e].cache[u]=n.memoStorage[e].cache[u]||t.apply(this,i),r.abrupt("return",n.memoStorage[e].cache[u]);case 3:case"end":return r.stop()}},r,this)}),function(){var e=a.apply(this,arguments);return new Promise(function(t,r){return function n(a,i){try{var o=e[a](i),u=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});t(u)}("next")})};var a};var n="undefined"==typeof window?{}:window;void 0===n.memoStorage&&(n.memoStorage={})},942:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pushEvent=void 0;var n=r(775);t.pushEvent=function(e){var t=e.event,r=e.options,a=void 0===r?{}:r,i=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(e,["event","options"]);if(window.gtag)try{var o=a.formatEvent,u=void 0===o||o?(0,n.stringToUpperCamelCase)(t):t;window.gtag("event",u,(0,n.objectKeysToLowerCamel)(i))}catch(e){console.error("GA4 Error: ",e)}}},943:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(500);t.default=(0,n.v4)()}}]);